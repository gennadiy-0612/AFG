/* * Automatic Photo Gallary 2015 * Simply insert .jpg format photo in ../fotos/ folder * Shcherbakha Gennadiy. */// Initial attribute and tag nameIdCl of html tagvar Nod = {    baseFrame: {},    papaTag: 'body',    sonTag: 'p',    select: 'id',    nameIdCl: 'clicks',    born: '',    insert: function () {        Nod.born = document.createElement(Nod.sonTag);        Nod.born.setAttribute(Nod.select, Nod.nameIdCl);        Nod.born = document.getElementById(Nod.papaTag).appendChild(Nod.born);        Nod.baseFrame[Nod.sonTag + Nod.select.toUpperCase() + Nod.nameIdCl] = this.born;    }};Node.dirr = dirr;Nod.AJAX = {    url: '',    text: '',    add: function () {        var httpRequest;        makeRequest(Nod.AJAX.url);        function makeRequest(url) {            Nod.AJAX.url = 'php/' + Node.dirr + '.php?l=' + Nod.move.now;            if (window.XMLHttpRequest) { // Mozilla, Safari, ...                httpRequest = new XMLHttpRequest();            } else if (window.ActiveXObject) { // IE                try {                    httpRequest = new ActiveXObject("Msxml2.XMLHTTP");                }                catch (e) {                    try {                        httpRequest = new ActiveXObject("Microsoft.XMLHTTP");                    }                    catch (e) {                    }                }            }            if (!httpRequest) {                console.log('Giving up : Cannot create an XMLHTTP instance');                return false;            }            httpRequest.onreadystatechange = alertContents;            httpRequest.open('GET', Nod.AJAX.url);            httpRequest.send();        }        function alertContents() {            if (httpRequest.readyState === 4) {                if (httpRequest.status === 200) {                    Nod.AJAX.text = httpRequest.responseText;                    Nod.baseFrame['aIDnote'].textContent = httpRequest.responseText;                } else {                    console.log('There was a problem with the request.');                }            }        }    }};Nod.listen = {    ev: '',    fn: '',    elem: '',    add: function () {        Nod.listen.elem.addEventListener ?            Nod.listen.elem.addEventListener(Nod.listen.ev, Nod.listen.fn, false) :            Nod.listen.elem.attachEvent("on" + Nod.listen.ev, Nod.listen.fn);    },    out: function () {        Nod.listen.elem.removeEventListener ?            Nod.listen.elem.removeEventListener(Nod.listen.ev, Nod.listen.fn, false) :            Nod.listen.elem.detachEvent("on" + Nod.listen.ev, Nod.listen.fn);    }};Nod.move = {    back: -1,    to: 1,    hrefMore: '',    hrefLess: '',    allEls: number,    now: Nod.hash || 0,    preview: '',    forw: '',    image: '',    i: 0,    h: 240,    w: 320,    setting: function () {        Nod.baseFrame.imgIDphoto.setAttribute('style', 'opacity:0');        Nod.move.preview.setAttribute('href', '#' + Nod.sizer + (Nod.move.now < 0 ? number - 1 : Nod.move.now));        Nod.move.forw.setAttribute('href', '#' + Nod.sizer + (Nod.move.now == number ? 0 : Nod.move.now));        Nod.move.image.setAttribute('src', 'php/putinwindow.php?d=' + Node.dirr + '&s=' + Nod.move.now + '&w=' + Nod.move.w + '&h=' + Nod.move.h);        Nod.baseFrame['aIDcount'].textContent = Nod.move.now + '/' + number;    },    prev: function () {        Nod.move.now = Nod.move.now + Nod.move.back;        if (Nod.move.now < 0) Nod.move.now = number - 1;        Nod.move.setting();    },    forward: function () {        Nod.move.now = Nod.move.now + Nod.move.to;        if (Nod.move.now >= Nod.move.allEls) Nod.move.now = 0;        Nod.move.setting();    }};Nod.FS = function (e) {    if (e.keyCode == 13) {        Nod.toggleFS();        Nod.full.make();    }    if (e.keyCode == 37) {        Nod.move.prev();        var id = '';        window.location.hash = '#' + Nod.sizer + Nod.move.now.toString();    }    if (e.keyCode == 39) {        Nod.move.forward();        window.location.hash = '#' + Nod.sizer + Nod.move.now.toString();    }    if (e.keyCode == 61) {        if (Nod.sizer == 'full') {            Nod.toggleFS();        }        Nod.full.make();    }    if (e.keyCode == 173) {        Nod.mini.make();    }    else console.log(e.keyCode);};Nod.toggleFS = function () {    if (!document.fullscreenElement &&    // alternative standard method        !document.mozFullScreenElement && !document.webkitFullscreenElement) {  // current working methods        if (document.documentElement.requestFullscreen) {            document.documentElement.requestFullscreen();        } else if (document.documentElement.mozRequestFullScreen) {            document.documentElement.mozRequestFullScreen();        } else if (document.documentElement.webkitRequestFullscreen) {            document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);        }    } else {        if (document.cancelFullScreen) {            document.cancelFullScreen();        } else if (document.mozCancelFullScreen) {            document.mozCancelFullScreen();        } else if (document.webkitCancelFullScreen) {            document.webkitCancelFullScreen();        }    }};Nod.test = {    i: 0,    start: function () {        var i = 0;        var id = setInterval(function () {            i = i + 0.05;            Nod.baseFrame.imgIDphoto.setAttribute('style', 'opacity:' + i + ';');            if (i > 1) {                clearInterval(id);                Nod.baseFrame.imgIDphoto.setAttribute('style', 'opacity:1;');            }        }, 40);    }};Nod.err = function () {    Nod.baseFrame.imgIDphoto.setAttribute('src', 'errors/404-error-pages.jpg');};Nod.listen.elem = Nod.bod = document.getElementById('body');Nod.listen.ev = 'keydown';Nod.listen.fn = Nod.FS;Nod.listen.add();Nod.sizer = 'mini';Nod.nameIdCl = 'frame';Nod.born = 'p';Nod.select = 'id';Nod.insert();Nod.papaTag = Nod.nameIdCl;Nod.sonTag = 'img';Nod.nameIdCl = 'photo';Nod.insert();Nod.baseFrame.imgIDphoto.setAttribute('style', 'opacity:0;');Nod.listen.elem = Nod.baseFrame.imgIDphoto;Nod.listen.ev = 'load';Nod.listen.fn = Nod.test.start;Nod.listen.add();Nod.listen.fn = Nod.AJAX.add;Nod.listen.add();Nod.listen.ev = 'error';Nod.listen.fn = Nod.err;Nod.listen.add();Nod.sonTag = 'a';Nod.nameIdCl = 'note';Nod.insert();Nod.nameIdCl = 'prev';Nod.insert();Nod.baseFrame['aIDprev'].textContent = '<';Nod.nameIdCl = 'forward';Nod.insert();Nod.baseFrame['aIDforward'].textContent = '>';Nod.nameIdCl = 'gofull';Nod.insert();Nod.baseFrame['aIDgofull'].textContent = '+';Nod.papaTag = 'body';Nod.sonTag = 'ol';Nod.nameIdCl = 'full-vertical';Nod.insert();Nod.papaTag = 'full-vertical';Nod.sonTag = 'li';Nod.nameIdCl = 'vertical-li';Nod.insert();Nod.papaTag = 'vertical-li';Nod.sonTag = 'a';Nod.nameIdCl = 'vertical-li-link';Nod.insert();Nod.baseFrame['aIDvertical-li-link'].setAttribute('href', '/');Nod.baseFrame['aIDvertical-li-link'].textContent = 'AFG';Nod.papaTag = 'body';Nod.sonTag = 'ol';Nod.nameIdCl = 'full-width';Nod.insert();Nod.papaTag = 'full-width';Nod.sonTag = 'li';Nod.nameIdCl = 'full-width-li';Nod.insert();Nod.baseFrame['liIDfull-width-li'].setAttribute('class', 'full-li');Nod.papaTag = 'full-width-li';Nod.sonTag = 'a';Nod.nameIdCl = 'prev-link';Nod.insert();Nod.baseFrame['aIDprev-link'].setAttribute('class', 'full-link');Nod.baseFrame['aIDprev-link'].textContent = '<';Nod.papaTag = 'full-width';Nod.sonTag = 'li';Nod.nameIdCl = 'next-link';Nod.insert();Nod.baseFrame['liIDnext-link'].setAttribute('class', 'full-li');Nod.papaTag = 'next-link';Nod.sonTag = 'a';Nod.nameIdCl = 'count';Nod.insert();Nod.baseFrame['aIDcount'].setAttribute('class', 'full-link');Nod.papaTag = 'full-width';Nod.sonTag = 'li';Nod.nameIdCl = 'li-zoom';Nod.insert();Nod.baseFrame['liIDli-zoom'].setAttribute('class', 'full-li');Nod.papaTag = 'li-zoom';Nod.sonTag = 'a';Nod.nameIdCl = 'a-zoom';Nod.insert();Nod.baseFrame['aIDa-zoom'].setAttribute('class', 'full-link');Nod.baseFrame['aIDa-zoom'].textContent = '+';Nod.papaTag = 'full-width';Nod.sonTag = 'li';Nod.nameIdCl = 'li-download';Nod.insert();Nod.baseFrame['liIDli-download'].setAttribute('class', 'full-li');Nod.papaTag = 'li-download';Nod.sonTag = 'a';Nod.nameIdCl = 'a-download';Nod.insert();Nod.baseFrame['aIDa-download'].setAttribute('class', 'full-link');Nod.baseFrame['aIDa-download'].textContent = '=';Nod.papaTag = 'full-width';Nod.sonTag = 'li';Nod.nameIdCl = 'li-next';Nod.insert();Nod.baseFrame['liIDli-next'].setAttribute('class', 'full-li');Nod.papaTag = 'li-next';Nod.sonTag = 'a';Nod.nameIdCl = 'a-next';Nod.insert();Nod.baseFrame['aIDa-next'].setAttribute('class', 'full-link');Nod.baseFrame['aIDa-next'].textContent = '>';Nod.mini = {    pref: 'mini',    H: 240,    W: 320,    make: function () {        Nod.sizer = Nod.mini.pref;        Nod.baseFrame.imgIDphoto.setAttribute('style', 'opacity:0');        window.location.hash = '#' + Nod.sizer + Nod.move.now.toString();        Nod.baseFrame.pIDframe.setAttribute('id', Nod.mini.pref + 'frame');        Nod.baseFrame.imgIDphoto.setAttribute('id', Nod.mini.pref + 'photo');        Nod.baseFrame.imgIDphoto.setAttribute('src', 'php/putinwindow.php?d=' + Node.dirr + '&s=' + Nod.move.now + '&w=' + Nod.mini.W + '&h=' + Nod.mini.H);        Nod.baseFrame.aIDgofull.setAttribute('id', Nod.mini.pref + 'gofull');        Nod.baseFrame.aIDgofull.textContent = '+';        Nod.listen.elem = Nod.baseFrame.aIDgofull;        Nod.listen.ev = 'click';        Nod.listen.fn = Nod.full.make;        Nod.listen.add();        Nod.baseFrame.aIDprev.setAttribute('id', Nod.mini.pref + 'prev');        Nod.baseFrame.aIDprev.setAttribute('href', '#' + Nod.sizer + (Nod.move.now == 0 ? number - 1 : Nod.move.now));        Nod.baseFrame.aIDforward.setAttribute('id', Nod.mini.pref + 'forward');        Nod.baseFrame.aIDforward.setAttribute('href', '#' + Nod.sizer + (Nod.move.now > number ? 0 : Nod.move.now));        Nod.baseFrame['aIDcount'].setAttribute('id', 'mini-count');        Nod.baseFrame['aIDcount'].textContent = Nod.move.now + '/' + number;        Nod.listen.elem = Nod.baseFrame.aIDforward;        Nod.move.preview = Nod.baseFrame.aIDprev;        Nod.move.forw = Nod.baseFrame.aIDforward;        Nod.move.image = Nod.baseFrame.imgIDphoto;        Nod.move.h = 240;        Nod.move.w = 320;        Nod.listen.ev = 'click';        Nod.listen.fn = Nod.move.forward;        Nod.listen.add();        Nod.listen.ev = 'click';        Nod.listen.elem = Nod.baseFrame.aIDprev;        Nod.listen.ev = 'click';        Nod.listen.fn = Nod.move.prev;        Nod.listen.add();    }};Nod.full = {    pref: 'full',    H: window.innerHeight || document.documentElement.clientHeight,    W: window.innerWidth || document.documentElement.clientWidth,    make: function () {        Nod.baseFrame.imgIDphoto.setAttribute('style', 'opacity:0');        Nod.sizer = Nod.full.pref;        window.location.hash = '#' + Nod.sizer + Nod.move.now.toString();        Nod.baseFrame.pIDframe.setAttribute('id', Nod.full.pref + 'frame');        Nod.baseFrame.imgIDphoto.setAttribute('id', Nod.full.pref + 'photo');        Nod.baseFrame.imgIDphoto.setAttribute('src', 'php/putinwindow.php?d=' + Node.dirr + '&s=' + Nod.move.now + '&w=' + Nod.full.W + '&h=' + Nod.full.H);        Nod.baseFrame.aIDgofull.setAttribute('id', Nod.full.pref + 'gofull');        Nod.baseFrame.aIDgofull.textContent = '-';        Nod.listen.elem = Nod.baseFrame.aIDgofull;        Nod.listen.ev = 'click';        Nod.listen.fn = Nod.full.make;        Nod.listen.out();        Nod.listen.fn = Nod.mini.make;        Nod.listen.add();        Nod.baseFrame.aIDprev.setAttribute('id', Nod.full.pref + 'prev');        Nod.baseFrame.aIDprev.setAttribute('href', '#' + Nod.sizer + (Nod.move.now == 0 ? number - 1 : Nod.move.now));        Nod.baseFrame.aIDforward.setAttribute('id', Nod.full.pref + 'forward');        Nod.baseFrame['aIDcount'].setAttribute('id', 'count');        Nod.baseFrame['aIDcount'].textContent = Nod.move.now + '/' + number;        Nod.listen.elem = Nod.baseFrame.aIDforward;        Nod.move.preview = Nod.baseFrame.aIDprev;        Nod.move.forw = Nod.baseFrame.aIDforward;        Nod.move.image = Nod.baseFrame.imgIDphoto;        Nod.move.h = Nod.full.H;        Nod.move.w = Nod.full.W;        Nod.listen.ev = 'click';        Nod.listen.fn = Nod.move.forward;        Nod.listen.add();        Nod.listen.ev = 'click';        Nod.listen.elem = Nod.baseFrame.aIDprev;        Nod.listen.fn = Nod.move.prev;        Nod.listen.add();    }};Nod.resize = function (e) {    if (Nod.sizer == 'full') {        Nod.move.h = window.innerHeight || document.documentElement.clientHeight;        Nod.move.w = window.innerWidth || document.documentElement.clientWidth;        Nod.baseFrame.imgIDphoto.setAttribute('src', 'php/putinwindow.php?d=' + Node.dirr + '&s=' + Nod.move.now + '&w=' + Nod.move.w + '&h=' + Nod.move.h);    }};window.onresize = Nod.resize;Nod.finder = /#\w{3,4}\d{1,3}/;if (window.location.hash == '') {    window.location.hash = '#mini0';    Nod.sizer = 'mini';    Nod[Nod.sizer].make();    window.location.hash = '#mini0';}if (Nod.finder.test(window.location.hash)) {    Nod.hash = Nod.move.now = parseInt(window.location.hash.match(/\d{1,3}/)[0]) || 0;    Nod.sizer = window.location.hash.match(/\w{3,4}/)[0];    Nod[Nod.sizer].make();    window.location.hash = Nod.sizer + Nod.hash;}else {    Nod.hash = Nod.move.now = 0;    window.location.hash = '#mini0';}